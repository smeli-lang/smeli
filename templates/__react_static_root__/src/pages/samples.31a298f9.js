(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{22:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(20),o=n(11),u=n(53),l=n.n(u),c=n(140),s=n(135),f=n(136);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(){function e(){Object(s.a)(this,e),this.dispose&&e.disposableOwner&&e.disposableOwner.push(this)}return Object(f.a)(e,[{key:"type",value:function(){var e=this.constructor;if(void 0===e.typeName)throw new Error("Invalid type class '".concat(e.name,"', missing static typeName"));return e}},{key:"as",value:function(e){if(this.constructor===e)return this;var t=this.type().typeName,n=e.typeName;throw new Error("Type error: 'found '".concat(t,"' instead of '").concat(n,"'"))}},{key:"is",value:function(e){return this.constructor===e}},{key:"match",value:function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r[0]===this.constructor||"_"===r[0])return r[1](this)}}catch(o){n.e(o)}finally{n.f()}var a=this.type().typeName,i=e.map((function(e){return e[0].typeName})).join(", ");throw new Error("Type error: 'found '".concat(a,"', expected one of: '").concat(i,"'"))}}]),e}();p.disposableOwner=null;var h=n(137),y=n(138),d=n(139);function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var w=function(e){Object(h.a)(n,e);var t=x(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return n}(p);w.typeName="any";var T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(s.a)(this,e),this.name=t,this.validate=n,this.overloads=[]}return Object(f.a)(e,[{key:"implement",value:function(e){this.validate&&this.validate(e),this.overloads.push(e)}},{key:"call",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return e.type()})),a=this.findMatch(r);if(!a){var i=r.map((function(e){return e.typeName})).join(", ");throw new Error("Cannot call '".concat(this.name,"' with argument types (").concat(i,")"))}return a.call.apply(a,t)}},{key:"findMatch",value:function(e){var t,n=g(this.overloads);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.argumentTypes.length===e.length){for(var a=0,i=0;i<e.length;i++){var o=r.argumentTypes[i];o!==w&&e[i]!==o||a++}if(a===e.length)return r}}}catch(u){n.e(u)}finally{n.f()}return null}}]),e}();function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var E=function(e){Object(h.a)(n,e);var t=k(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).value=e,r}return n}(p);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}E.typeName="bool";var j=function(e){Object(h.a)(n,e);var t=O(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this)).name=e,a.expression=r,a}return n}(p);j.typeName="expression";var S=n(141);function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(){function e(t,n){Object(s.a)(this,e),this.context=t,this.value=null,this.references=new Set,this.stages=[{dependencies:new Set,evaluator:n,disposables:[]}],this.currentStage=0,this.isEvaluating=!1,M.unreferencedEntries.add(this)}return Object(f.a)(e,[{key:"evaluate",value:function(e,t,n){if(e&&(this.references.has(e)||(e.stages[e.currentStage].dependencies.add(this),0===this.references.size&&M.unreferencedEntries.delete(this),this.references.add(e))),t){var r=this.stages[0].evaluator.smeliMeta;if(r&&r.sourceExpression)return new j(n||"",r.sourceExpression);throw new Error("No expression bound to this evaluator")}if(this.value)return this.value;this.isEvaluating=!0;try{return this.computeValue()}finally{this.isEvaluating=!1}}},{key:"deprecate",value:function(){this.invalidateReferences()}},{key:"invalidate",value:function(){if(this.isEvaluating)throw new Error("Invalidating a cache entry being evaluated");this.invalidateReferences(),this.discard()}},{key:"uncache",value:function(){this.context.cache.delete(this.stages[0].evaluator)}},{key:"computeValue",value:function(){for(var t=this.stages[this.currentStage],n=t.evaluator;"function"==typeof n;){var r=p.disposableOwner;p.disposableOwner=t.disposables;try{n=n(this.context),e.enableCache&&("function"==typeof n?(t={dependencies:new Set,evaluator:n,disposables:[]},this.stages.push(t),this.currentStage++):this.value=n)}catch(u){var a,i=t.disposables,o=C(i.reverse());try{for(o.s();!(a=o.n()).done;){a.value.dispose()}}catch(l){o.e(l)}finally{o.f()}throw i.length=0,u}finally{p.disposableOwner=r}}return n}},{key:"invalidateReferences",value:function(){for(;this.references.size>0;){var e=this.references.values().next().value;e.invalidateReferences();for(var t=0;t<=e.currentStage;t++){if(e.stages[t].dependencies.has(this)){e.discard(t);break}}}}},{key:"discard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.value=null;for(var t=this.currentStage;t>=e;t--){var n,r=this.stages[t],a=C(r.dependencies);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.references.delete(this),0===i.references.size&&M.unreferencedEntries.add(i)}}catch(s){a.e(s)}finally{a.f()}r.dependencies.clear();var o,u=r.disposables,l=C(u.reverse());try{for(l.s();!(o=l.n()).done;){var c=o.value;c.dispose()}}catch(s){l.e(s)}finally{l.f()}u.length=0}this.stages.length=e+1,this.currentStage=e}}]),e}();_.enableCache=!0;var M=function(){function e(){Object(s.a)(this,e)}return Object(f.a)(e,null,[{key:"evaluateRoot",value:function(t,n){var r=n.cache.get(t);r||(r=new _(n,t),n.cache.set(t,r)),e.currentEntry=r;try{return r.evaluate()}finally{if(e.currentEntry=null,!e.unreferencedEntries.has(r))throw new Error("Evaluation root has been referenced during evaluation");e.unreferencedEntries.delete(r),e.gc(),e.unreferencedEntries.add(r)}}},{key:"gc",value:function(){for(var t=e.unreferencedEntries;t.size>0;){var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.invalidate(),a.uncache(),t.delete(a)}}catch(i){r.e(i)}finally{r.f()}}}},{key:"evaluate",value:function(t,n,r,a){var i=e.currentEntry;if(!i)throw new Error("Evaluation must start with evaluateRoot()");var o,u,l=n||i.context;if("string"==typeof t){var s=l.transients.get(t);if(s)return e.activeTransients.set(s,e.stackSize),_.enableCache=!1,s;o=t,u=l.lookup(t)}else o=null,u=t;if(u){var f,v=l.cache.get(u);if(v||(v=new _(l,u),l.cache.set(u,v)),a)for(var m in a){if(l.transients.has(m))throw new Error("Multiple overrides of the same name on the same context, this is not supported");l.transients.set(m,a[m])}e.currentEntry=v,e.stackSize++,_.enableCache=!0;try{f=v.evaluate(i||void 0,r,o)}catch(T){var p=o||"[anonymous evaluator]";throw T.smeliStack=T.smeliStack||[],T.smeliStack.push(p),T}finally{if(e.currentEntry=i,e.stackSize--,a)for(var h in a)l.transients.delete(h),e.activeTransients.delete(a[h]);_.enableCache=!0;var y,d=C(e.activeTransients);try{for(d.s();!(y=d.n()).done;){var g=Object(c.a)(y.value,2),b=g[0],x=g[1];x=Math.min(x,e.stackSize),e.activeTransients.set(b,x),x===e.stackSize&&(_.enableCache=!1)}}catch(k){d.e(k)}finally{d.f()}}return f}var w=l.parent;if(w)return R(t,w,r);throw new Error("No previous definition found for '".concat(t,"'"))}},{key:"currentEvaluationContext",value:function(){var t=e.currentEntry;if(!t)throw new Error("Not currently evaluating");return t.context}}]),e}();M.currentEntry=null,M.unreferencedEntries=new Set,M.activeTransients=new Map,M.stackSize=0;var R=M.evaluate,z=M.evaluateRoot,P=M.currentEvaluationContext;function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var B=function(e){Object(h.a)(n,e);var t=L(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(s.a)(this,n),(e=t.call(this)).parent=r,e.prefix=a,e.bindings=new Map,e.cache=new Map,e.transients=new Map,e.childScopes=new Set,e.derivedScopes=new Set,null==r||r.childScopes.add(Object(S.a)(e)),null==a||a.derivedScopes.add(Object(S.a)(e)),e}return Object(f.a)(n,[{key:"dispose",value:function(){var e,t;null===(e=this.parent)||void 0===e||e.childScopes.delete(this),null===(t=this.prefix)||void 0===t||t.derivedScopes.delete(this);var n,r=I(this.cache.values());try{for(r.s();!(n=r.n()).done;){n.value.invalidate()}}catch(a){r.e(a)}finally{r.f()}if(this.childScopes.size>0)throw new Error("Child scope was not unregistered after invalidation")}},{key:"push",value:function(e){var t=this;if(Array.isArray(e))e.forEach((function(e){return t.push(e)}));else{var n=this.lookup(e.name);n&&this.deprecateDerivedBinding(n);var r=this.bindings.get(e.name);r||(r=[],this.bindings.set(e.name,r)),r.push(e)}}},{key:"pop",value:function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.pop(e[t]);else{var n=this.bindings.get(e.name);if(!n)throw new Error("No previous definition found for '".concat(e.name,"'"));if(e!==n.pop())throw new Error("Wrong unbinding order for '".concat(e.name,"'"));this.invalidateDerivedBinding(e.evaluate),0===n.length&&this.bindings.delete(e.name)}}},{key:"evaluateNested",value:function(e){for(var t={},r=0,a=Object.entries(e);r<a.length;r++){var i=Object(c.a)(a[r],2),o=i[0],u=i[1];if(null===u)t[o]=R(o,this);else if(void 0!==u.typeName){var l=u;t[o]=R(o,this).as(l)}else{var s=u,f=R(o,this).as(n);t[o]=f.evaluateNested(s)}}return t}},{key:"lookup",value:function(e){return this.prefixLookup(e,this)}},{key:"prefixLookup",value:function(e,t){var n,r=this.bindings.get(e);if(r)for(var a=r.length-1;a>=0;a--){var i=r[a],o=t.cache.get(i.evaluate);if(!o||!o.isEvaluating)return i.evaluate}return(null===(n=this.prefix)||void 0===n?void 0:n.prefixLookup(e,t))||null}},{key:"deprecateDerivedBinding",value:function(e){var t=this.cache.get(e);t&&t.deprecate();var n,r=I(this.derivedScopes.values());try{for(r.s();!(n=r.n()).done;){n.value.deprecateDerivedBinding(e)}}catch(a){r.e(a)}finally{r.f()}}},{key:"invalidateDerivedBinding",value:function(e){var t=this.cache.get(e);t&&t.invalidate();var n,r=I(this.derivedScopes.values());try{for(r.s();!(n=r.n()).done;){n.value.invalidateDerivedBinding(e)}}catch(a){r.e(a)}finally{r.f()}}},{key:"root",value:function(){var e;return(null===(e=this.parent)||void 0===e?void 0:e.root())||this}}]),n}(p);B.typeName="scope";var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=P().as(B),n=new B(t);return n.push(e),n};function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var D=function(e){Object(h.a)(n,e);var t=F(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this)).parentScope=e,i.argumentNames=r,i.evaluator=a,i}return Object(f.a)(n,[{key:"__call_site__",value:function(e){var t=this;if(this.argumentNames.length!==e.length)throw new Error("Argument mismatch, expected ".concat(this.argumentNames.length," but got ").concat(e.length));var n=new B(this.parentScope),r=P().as(B);return this.argumentNames.forEach((function(t,a){n.push({name:t,evaluate:function(){return R(e[a],r)}})})),function(){return R(t.evaluator,n)}}},{key:"makeTransientEvaluator",value:function(){var e=this,t=new B(this.parentScope);return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(e.argumentNames.length!==r.length)throw new Error("Argument mismatch, expected ".concat(e.argumentNames.length," but got ").concat(r.length));var i={};return e.argumentNames.forEach((function(e,t){i[e]=r[t]})),R(e.evaluator,t,!1,i)}}}]),n}(p);D.typeName="lambda";var V=n(149);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var H=function(e){Object(h.a)(n,e);var t=q(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this)).parentScope=e,a.overloadedFunction=r,a}return Object(f.a)(n,[{key:"__call_site__",value:function(e){var t=this;return function(){var n,r=e.map((function(e){return R(e)}));return(n=t.overloadedFunction).call.apply(n,Object(V.a)(r))}}},{key:"makeTransientEvaluator",value:function(){var e=this;return function(){var t;return(t=e.overloadedFunction).call.apply(t,arguments)}}}]),n}(p);function W(e,t){var n=new T(e);return t.forEach((function(e){return n.implement(e)})),{name:e,evaluate:function(){var e=P().as(B);return new H(e,n)}}}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}H.typeName="native_function";var X=function(e){Object(h.a)(n,e);var t=$(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).value=e,r}return n}(p);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}X.typeName="number";var G=function(e){Object(h.a)(n,e);var t=Y(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).value=e,r}return n}(p);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}G.typeName="string";var Z=function(e){Object(h.a)(n,e);var t=J(n);function n(e,r){var a;return Object(s.a)(this,n),(a=t.call(this)).x=e,a.y=r,a}return Object(f.a)(n,[{key:"swizzle",value:function(e){var t=this;return Array.from(e).map((function(e){switch(e){case"x":case"r":return t.x;case"y":case"g":return t.y;default:throw new Error("Vec2 has no member named '".concat(e,"'"))}}))}}]),n}(p);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}Z.typeName="vec2";var Q=function(e){Object(h.a)(n,e);var t=K(n);function n(e,r,a){var i;return Object(s.a)(this,n),(i=t.call(this)).x=e,i.y=r,i.z=a,i}return Object(f.a)(n,[{key:"swizzle",value:function(e){var t=this;return Array.from(e).map((function(e){switch(e){case"x":case"r":return t.x;case"y":case"g":return t.y;case"z":case"b":return t.z;default:throw new Error("Vec2 has no member named '".concat(e,"'"))}}))}},{key:"toCssColor",value:function(e){return void 0!==e?"rgba(".concat(255*this.x,", ").concat(255*this.y,", ").concat(255*this.z,", ").concat(e,")"):"rgb(".concat(255*this.x,", ").concat(255*this.y,", ").concat(255*this.z,")")}}]),n}(p);Q.typeName="vec3";var ee=function e(t){Object(s.a)(this,e),this.value=t},te=function e(t){Object(s.a)(this,e),this.scopeNames=t.slice(0,t.length-1).map((function(e){return new G(e)})),this.name=t[t.length-1],this.nameValue=new G(this.name)},ne=function e(t,n){Object(s.a)(this,e),this.statements=t,this.prefixExpression=n},re=function e(t,n){Object(s.a)(this,e),this.args=t,this.body=n},ae=function e(t,n){Object(s.a)(this,e),this.identifier=t,this.args=n},ie=function e(t,n,r){Object(s.a)(this,e),this.trait=t,this.lhs=n,this.rhs=r},oe=function e(t,n,r){Object(s.a)(this,e),this.condition=t,this.trueCase=n,this.falseCase=r},ue=function e(t,n,r,a){Object(s.a)(this,e),this.isMarker=!1,this.line=t,this.startOffset=n,this.identifier=r,this.expression=a},le=function e(t,n,r,a,i){Object(s.a)(this,e),this.line=t,this.startOffset=n,this.isMarker=r,this.headingLevel=a,this.text=i};function ce(e,t,n){var r=e.constructor;if(!t.has(r))throw new Error("Failed to traverse AST, no matching constructor found in the given visitor");return t.get(r)(e,n)}function se(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=function(e){return function(t,n){if(n.argumentTypes.length!==e)throw new Error("Trait '".concat(t,"' always takes ").concat(e," arguments"))}},me=function(e){return function(t,n){if(n.returnType!==e)throw new Error("Trait '".concat(t,"' must return a value of type '").concat(e.typeName,"'"))}};function pe(e,t){return new T(e+" trait",function(e,t){return function(n){var r,a=se(t);try{for(a.s();!(r=a.n()).done;){(0,r.value)(e,n)}}catch(i){a.e(i)}finally{a.f()}}}(e,t))}var he=pe("add",[ve(2)]);he.implement({argumentTypes:[X,X],returnType:G,call:function(e,t){return new X(e.value+t.value)}}),he.implement({argumentTypes:[G,G],returnType:G,call:function(e,t){return new G(e.value+t.value)}}),he.implement({argumentTypes:[Z,Z],returnType:Z,call:function(e,t){return new Z(e.x+t.x,e.y+t.y)}}),he.implement({argumentTypes:[X,Z],returnType:Z,call:function(e,t){return new Z(e.value+t.x,e.value+t.y)}}),he.implement({argumentTypes:[Z,X],returnType:Z,call:function(e,t){return new Z(e.x+t.value,e.y+t.value)}}),he.implement({argumentTypes:[Q,Q],returnType:Q,call:function(e,t){return new Q(e.x+t.x,e.y+t.y,e.z+t.y)}}),he.implement({argumentTypes:[X,Q],returnType:Q,call:function(e,t){return new Q(e.value+t.x,e.value+t.y,e.value+t.z)}}),he.implement({argumentTypes:[Q,X],returnType:Q,call:function(e,t){return new Q(e.x+t.value,e.y+t.value,e.z+t.value)}});var ye=pe("cmp",[ve(2),me(E)]);ye.implement({argumentTypes:[X,X],returnType:E,call:function(e,t){return new E(e.value<t.value)}});var de=pe("div",[ve(2)]);de.implement({argumentTypes:[X,X],returnType:G,call:function(e,t){return new X(e.value/t.value)}}),de.implement({argumentTypes:[Z,Z],returnType:Z,call:function(e,t){return new Z(e.x/t.x,e.y/t.y)}}),de.implement({argumentTypes:[X,Z],returnType:Z,call:function(e,t){return new Z(e.value/t.x,e.value/t.y)}}),de.implement({argumentTypes:[Z,X],returnType:Z,call:function(e,t){return new Z(e.x/t.value,e.y/t.value)}}),de.implement({argumentTypes:[Q,Q],returnType:Q,call:function(e,t){return new Q(e.x/t.x,e.y/t.y,e.z/t.y)}}),de.implement({argumentTypes:[X,Q],returnType:Q,call:function(e,t){return new Q(e.value/t.x,e.value/t.y,e.value/t.z)}}),de.implement({argumentTypes:[Q,X],returnType:Q,call:function(e,t){return new Q(e.x/t.value,e.y/t.value,e.z/t.value)}});var ge=pe("equ",[ve(2),me(E)]);ge.implement({argumentTypes:[X,X],returnType:E,call:function(e,t){return new E(e.value==t.value)}});var be,xe,we=pe("index",[ve(2),(be=1,xe=G,function(e,t){if(t.argumentTypes[be]!==xe)throw new Error("Trait '".concat(e,"' always takes a '").concat(t.argumentTypes[be].typeName,"' argument at position ").concat(be))})]);function Te(e){switch(e.length){case 1:return new X(e[0]);case 2:return new Z(e[0],e[1]);case 3:return new Q(e[0],e[1],e[2])}throw new Error("Exceeded maximum vector swizzling size")}we.implement({argumentTypes:[Z,G],returnType:w,call:function(e,t){return Te(e.swizzle(t.value))}}),we.implement({argumentTypes:[Q,G],returnType:w,call:function(e,t){return Te(e.swizzle(t.value))}}),we.implement({argumentTypes:[B,G],returnType:w,call:function(e,t){return R(t.value,e)}});var ke=pe("mul",[ve(2)]);ke.implement({argumentTypes:[X,X],returnType:G,call:function(e,t){return new X(e.value*t.value)}}),ke.implement({argumentTypes:[Z,Z],returnType:Z,call:function(e,t){return new Z(e.x*t.x,e.y*t.y)}}),ke.implement({argumentTypes:[X,Z],returnType:Z,call:function(e,t){return new Z(e.value*t.x,e.value*t.y)}}),ke.implement({argumentTypes:[Z,X],returnType:Z,call:function(e,t){return new Z(e.x*t.value,e.y*t.value)}}),ke.implement({argumentTypes:[Q,Q],returnType:Q,call:function(e,t){return new Q(e.x*t.x,e.y*t.y,e.z*t.y)}}),ke.implement({argumentTypes:[X,Q],returnType:Q,call:function(e,t){return new Q(e.value*t.x,e.value*t.y,e.value*t.z)}}),ke.implement({argumentTypes:[Q,X],returnType:Q,call:function(e,t){return new Q(e.x*t.value,e.y*t.value,e.z*t.value)}});var Ee=pe("str",[ve(1),me(G)]);Ee.implement({argumentTypes:[E],returnType:G,call:function(e){return new G(e.value?"true":"false")}}),Ee.implement({argumentTypes:[D],returnType:G,call:function(e){return new G("lambda(".concat(e.argumentNames.join(", "),")"))}}),Ee.implement({argumentTypes:[G],returnType:G,call:function(e){return e}}),Ee.implement({argumentTypes:[X],returnType:G,call:function(e){return new G(e.value.toString())}}),Ee.implement({argumentTypes:[Z],returnType:G,call:function(e){return new G("vec2(".concat(e.x,", ").concat(e.y,")"))}}),Ee.implement({argumentTypes:[Q],returnType:G,call:function(e){return new G("vec3(".concat(e.x,", ").concat(e.y,", ").concat(e.z,")"))}});var Oe=pe("sub",[ve(2)]);Oe.implement({argumentTypes:[X,X],returnType:G,call:function(e,t){return new X(e.value-t.value)}}),Oe.implement({argumentTypes:[Z,Z],returnType:Z,call:function(e,t){return new Z(e.x-t.x,e.y-t.y)}}),Oe.implement({argumentTypes:[X,Z],returnType:Z,call:function(e,t){return new Z(e.value-t.x,e.value-t.y)}}),Oe.implement({argumentTypes:[Z,X],returnType:Z,call:function(e,t){return new Z(e.x-t.value,e.y-t.value)}}),Oe.implement({argumentTypes:[Q,Q],returnType:Q,call:function(e,t){return new Q(e.x-t.x,e.y-t.y,e.z-t.y)}}),Oe.implement({argumentTypes:[X,Q],returnType:Q,call:function(e,t){return new Q(e.value-t.x,e.value-t.y,e.value-t.z)}}),Oe.implement({argumentTypes:[Q,X],returnType:Q,call:function(e,t){return new Q(e.x-t.value,e.y-t.value,e.z-t.value)}});var je=pe("cmp_lt",[ve(2),me(E)]),Se=pe("cmp_gt",[ve(2),me(E)]),Ce=pe("cmp_le",[ve(2),me(E)]),Ae=pe("cmp_ge",[ve(2),me(E)]),_e=pe("cmp_ne",[ve(2),me(E)]);je.implement({argumentTypes:[X,X],returnType:E,call:function(e,t){return ye.call(e,t)}}),Se.implement({argumentTypes:[X,X],returnType:E,call:function(e,t){return ye.call(t,e)}}),Ce.implement({argumentTypes:[X,X],returnType:E,call:function(e,t){return new E(!ye.call(t,e).as(E).value)}}),Ae.implement({argumentTypes:[X,X],returnType:E,call:function(e,t){return new E(!ye.call(e,t).as(E).value)}}),_e.implement({argumentTypes:[X,X],returnType:E,call:function(e,t){return new E(!ge.call(e,t).as(E).value)}});var Me=new RegExp("(\\r\\n|\\r|\\n)","y"),Re=new RegExp("[ \\t]*","y"),ze=new RegExp("-?(([0-9]*\\.?[0-9]+)|(0b[01]+)|(0o[0-7]+)|(0x[0-9a-fA-F]+))\\b","y"),Pe=new RegExp('"[^"]*"',"y"),Ie=new RegExp("(true|false)\\b","y"),Ne=new RegExp("[_a-zA-Z&][_0-9a-zA-Z]*\\b","y"),Le=new RegExp("#{1,6}>?","y"),Be=new RegExp("[^\\r\\n]*","y"),Ue=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Object(s.a)(this,e),this.str=t,this.n=n,this.currentLine=0,this.currentLineStartIndex=n,this.fileName=r,this.messages=[]}return Object(f.a)(e,[{key:"eof",value:function(){return this.n===this.str.length}},{key:"peek",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.str.substr(this.n,e)}},{key:"next",value:function(){if(this.eof())throw new Error("Cannot move past the end of input string");this.n++}},{key:"match",value:function(e){return"string"==typeof e?this.matchExact(e):this.matchRegex(e)}},{key:"reportError",value:function(e){var t=this.currentLine+1,n=this.n-this.currentLineStartIndex+1;this.messages.push({file:this.fileName,line:t,column:n,message:e})}},{key:"matchExact",value:function(e){if(this.str.length-this.n<e.length)return null;var t=this.str.substr(this.n,e.length);return t===e?(this.n+=e.length,t):null}},{key:"matchRegex",value:function(e){var t=this.n;if(e.lastIndex=t,e.test(this.str)){var n=e.lastIndex;return this.n=n,this.str.substring(t,n)}return null}}]),e}();function Fe(e){e.match(Re)}function De(e){var t=e.match(Me);return t&&(e.currentLine++,e.currentLineStartIndex=e.n),t}function Ve(e){var t=[];do{var n=e.match(Ne);if(!n)return null;t.push(n)}while(e.match("."));return new te(t)}function qe(e,t){if(!e.match("{"))return null;var n=Ge(e);return e.match("}")?new ne(n,t):(e.reportError("Unterminated block, missing '}'"),null)}function He(e){var t=function(e){var t=e.match(Ie);return"true"===t?new ee(new E(!0)):"false"===t?new ee(new E(!1)):null}(e);if(t)return t;var n=function(e){if(!e.match("if"))return null;Fe(e);var t=Xe(e);if(!t)return e.reportError("Invalid expression"),null;if(Fe(e),!e.match("then"))return e.reportError("Expected 'then' here"),null;Fe(e);var n=Xe(e);if(!n)return e.reportError("Invalid expression"),null;if(Fe(e),!e.match("else"))return e.reportError("Expected 'else' here"),null;Fe(e);var r=Xe(e);return r?new oe(t,n,r):(e.reportError("Invalid expression"),null)}(e);if(n)return n;var r=Ve(e);if(r)switch(Fe(e),e.peek()){case"{":return qe(e,r);case"(":return function(e,t){if(!e.match("("))return null;var n=[];do{Fe(e);var r=Xe(e);if(!r)return e.reportError("Invalid expression"),null;n.push(r),Fe(e)}while(e.match(","));return e.match(")")?new ae(t,n):(e.reportError("Unterminated function call, missing ')'"),null)}(e,r);case"=":return"=>"==e.peek(2)?function(e,t){for(var n=[t];e.match(",");){Fe(e);var r=Ve(e);if(!r)return e.reportError("Expected identifier"),null;n.push(r),Fe(e)}if(!e.match("=>"))return e.reportError("Invalid lambda expression, expected '=>' here"),null;Fe(e);var a=Xe(e);return a?new re(n,a):(e.reportError("Invalid lambda body, expected expression"),null)}(e,r):r;default:return r}if(e.match("(")){Fe(e);var a=Xe(e);return a?(Fe(e),e.match(")")?a:(e.reportError("Unterminated nested expression, missing ')'"),null)):(e.reportError("Invalid nested expression"),null)}return function(e){var t=e.match(ze);if(!t)return null;var n="-"===t[0],r=Number(n?t.substr(1):t);return new ee(new X(n?-r:r))}(e)||function(e){var t=e.match(Pe);if(!t)return null;var n=t.substring(1,t.length-1);return new ee(new G(n))}(e)||qe(e,null)}function We(e){var t=He(e);if(!t)return null;for(Fe(e);"="==e.peek()||"<"==e.peek()||">"==e.peek()||"!"==e.peek();){var n=e.peek();if(e.next(),"="==e.peek()&&(n+="=",e.next()),Fe(e),e.eof())return e.reportError("Unexpected end of file"),null;var r=He(e);if(!r)return null;"="==n?t=new ie(ge,t,r):"<"==n?t=new ie(je,t,r):">"==n?t=new ie(Se,t,r):"<="==n?t=new ie(Ce,t,r):">="==n?t=new ie(Ae,t,r):"!="==n&&(t=new ie(_e,t,r)),Fe(e)}return t}function $e(e){var t=We(e);if(!t)return null;for(Fe(e);"*"==e.peek()||"/"==e.peek();){var n=e.peek();if(e.next(),Fe(e),e.eof())return e.reportError("Unexpected end of file"),null;var r=We(e);if(!r)return null;"*"==n?t=new ie(ke,t,r):"/"==n&&(t=new ie(de,t,r)),Fe(e)}return t}function Xe(e){var t=$e(e);if(!t)return null;for(Fe(e);!e.eof()&&("+"==e.str[e.n]||"-"==e.str[e.n]);){var n=e.str[e.n];if(e.n++,Fe(e),e.eof())return e.reportError("Unexpected end of file"),null;var r=$e(e);if(!r)return null;"+"==n?t=new ie(he,t,r):"-"==n&&(t=new ie(Oe,t,r)),Fe(e)}return t}function Ye(e){return"#"==e.peek()?function(e){var t,n=e.currentLine,r=e.n,a=e.match(Le);if(!a)return e.reportError("Invalid comment prefix"),null;var i=">"===a[a.length-1],o=i?a.length-1:a.length,u=(null===(t=e.match(Be))||void 0===t?void 0:t.trim())||"";return new le(n,r,i,o,u)}(e):function(e){var t=e.currentLine,n=e.n,r=Ve(e);if(!r)return e.reportError("Invalid identifier"),null;if(Fe(e),!e.match(":"))return e.reportError("Expected ':' here"),null;if(Fe(e),e.eof())return e.reportError("Unexpected end of file"),null;var a=Xe(e);return a?new ue(t,n,r,a):(e.reportError("Invalid expression"),null)}(e)}function Ge(e){for(var t=[];!e.eof();){do{Fe(e)}while(De(e));if(e.eof()||"}"===e.peek())break;var n=Ye(e);if(!n)break;t.push(n)}return t}var Je=W("abs",[{argumentTypes:[X],returnType:X,call:function(e){var t=Math.abs(e.value);return new X(t)}}]),Ze={name:"animate",evaluate:function(){var e=P().as(B);return new D(e,["start","end","duration"],(function(){var e=R("duration").as(X).value,t=!1,n=null;return function(){var r=R("end");if(t)return r;var a=R("start"),i=R("time").as(X).value;null===n&&(n=i);var o=(i-n)/e;o>=1&&(o=1,t=!0);var u=ke.call(a,new X(1-o)),l=ke.call(r,new X(o));return he.call(u,l)}}))}},Ke=W("ceil",[{argumentTypes:[X],returnType:X,call:function(e){var t=Math.ceil(e.value);return new X(t)}}]),Qe=W("cos",[{argumentTypes:[X],returnType:X,call:function(e){var t=Math.cos(e.value);return new X(t)}}]),et=W("dot",[{argumentTypes:[X,X],returnType:X,call:function(e,t){var n=e.value*t.value;return new X(n)}},{argumentTypes:[Z,Z],returnType:X,call:function(e,t){var n=e.x*t.x+e.y*t.y;return new X(n)}},{argumentTypes:[Q,Q],returnType:X,call:function(e,t){var n=e.x*t.x+e.y*t.y+e.z*t.z;return new X(n)}}]),tt=W("exp",[{argumentTypes:[X],returnType:X,call:function(e){return new X(Math.exp(e.value))}},{argumentTypes:[Z],returnType:Z,call:function(e){return new Z(Math.exp(e.x),Math.exp(e.y))}},{argumentTypes:[Q],returnType:Q,call:function(e){return new Q(Math.exp(e.x),Math.exp(e.y),Math.exp(e.z))}}]),nt=W("floor",[{argumentTypes:[X],returnType:X,call:function(e){var t=Math.floor(e.value);return new X(t)}}]),rt=W("fract",[{argumentTypes:[X],returnType:X,call:function(e){var t=(e.value%1+1)%1;return new X(t)}}]),at=W("length",[{argumentTypes:[Z],returnType:X,call:function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return new X(t)}},{argumentTypes:[Q],returnType:X,call:function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);return new X(t)}}]),it=W("log",[{argumentTypes:[X],returnType:X,call:function(e){return new X(Math.log(e.value))}},{argumentTypes:[Z],returnType:Z,call:function(e){return new Z(Math.log(e.x),Math.log(e.y))}},{argumentTypes:[Q],returnType:Q,call:function(e){return new Q(Math.log(e.x),Math.log(e.y),Math.log(e.z))}}]),ot=W("min",[{argumentTypes:[X,X],returnType:X,call:function(e,t){var n=Math.min(e.value,t.value);return new X(n)}}]),ut=W("max",[{argumentTypes:[X,X],returnType:X,call:function(e,t){var n=Math.max(e.value,t.value);return new X(n)}}]),lt=W("mod",[{argumentTypes:[X,X],returnType:X,call:function(e,t){var n=(e.value%t.value+t.value)%t.value;return new X(n)}}]),ct=W("normalize",[{argumentTypes:[Z],returnType:Z,call:function(e){var t=1/Math.sqrt(e.x*e.x+e.y*e.y);return new Z(e.x*t,e.y*t)}},{argumentTypes:[Q],returnType:Q,call:function(e){var t=1/Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);return new Q(e.x*t,e.y*t,e.z*t)}}]),st=W("pow",[{argumentTypes:[X,X],returnType:X,call:function(e,t){return new X(Math.pow(e.value,t.value))}},{argumentTypes:[Z,Z],returnType:Z,call:function(e,t){return new Z(Math.pow(e.x,t.x),Math.pow(e.y,t.y))}},{argumentTypes:[Q,Q],returnType:Q,call:function(e,t){return new Q(Math.pow(e.x,t.x),Math.pow(e.y,t.y),Math.pow(e.z,t.z))}}]),ft=W("str",[{argumentTypes:[w],returnType:G,call:function(e){return Ee.call(e).as(G)}}]),vt=[Je,Ze,Ke,Qe,et,tt,nt,rt,at,it,ot,ut,lt,ct,{name:"#outline",evaluate:function(){return new G("")}},st,W("sin",[{argumentTypes:[X],returnType:X,call:function(e){var t=Math.sin(e.value);return new X(t)}}]),W("smoothstep",[{argumentTypes:[X,X,X],returnType:X,call:function(e,t,n){var r=(n.value-e.value)/(t.value-e.value);return r=Math.max(r,0),r=Math.min(r,1),new X(r*r*(3-2*r))}}]),W("step",[{argumentTypes:[X,X],returnType:X,call:function(e,t){var n=t.value<e.value?0:1;return new X(n)}}]),ft,W("tan",[{argumentTypes:[X],returnType:X,call:function(e){var t=Math.tan(e.value);return new X(t)}}]),W("vec2",[{argumentTypes:[X],returnType:Z,call:function(e){return new Z(e.value,e.value)}},{argumentTypes:[X,X],returnType:Z,call:function(e,t){return new Z(e.value,t.value)}}]),W("vec3",[{argumentTypes:[X],returnType:Q,call:function(e){return new Q(e.value,e.value,e.value)}},{argumentTypes:[X,X,X],returnType:Q,call:function(e,t,n){return new Q(e.value,t.value,n.value)}},{argumentTypes:[X,Z],returnType:Q,call:function(e,t){return new Q(e.value,t.x,t.y)}},{argumentTypes:[Z,X],returnType:Q,call:function(e,t){return new Q(e.x,e.y,t.value)}}])],mt=function(e,t){var n=e.smeliMeta||{};return e.smeliMeta=Object.assign(Object.assign({},n),t),e},pt=new Map;function ht(e){return ce(e,pt)}pt.set(ee,(function(e){var t=e.value;return mt((function(){return t}),{sourceExpression:e})})),pt.set(te,(function(e){var t=e.name,n=!1;return"&"===e.name[0]&&(t=e.name.substr(1),n=!0),mt((function(){for(var r=P(),a=0;a<e.scopeNames.length;a++)r=we.call(r,e.scopeNames[a]);return n?R(t,r.as(B),!0):we.call(r,e.nameValue)}),{sourceExpression:e})})),pt.set(ne,(function(e){var t=dt(e.statements),n=e.prefixExpression?ht(e.prefixExpression):null;return mt((function(){var e=null;n&&(e=R(n).as(B));var r=P().as(B),a=new B(r,e);return t.forEach((function(e){return a.push(e.binding)})),a}),{sourceExpression:e})})),pt.set(re,(function(e){var t=ht(e.body);return mt((function(){var n=e.args.map((function(e){return e.name})),r=P().as(B);return new D(r,n,t)}),{sourceExpression:e})})),pt.set(ae,(function(e){var t=ht(e.identifier),n=e.args.map(ht);return mt((function(){var r=R(t);if(!r.is(D)&&!r.is(H))throw new Error("".concat(e.identifier.name," is not a function"));return r.__call_site__(n)}),{sourceExpression:e})})),pt.set(ie,(function(e){var t=ht(e.lhs),n=ht(e.rhs),r=e.trait;return mt((function(){var e=R(t),a=R(n);return r.call(e,a)}),{sourceExpression:e})})),pt.set(oe,(function(e){var t=ht(e.condition),n=ht(e.trueCase),r=ht(e.falseCase);return mt((function(){return R(t).as(E).value?n:r}),{sourceExpression:e})}));var yt=new Map;function dt(e){return Array.isArray(e)?e.map(dt):ce(e,yt)}function gt(e,t){e.push({name:t.name,evaluate:function(){var e=U();(t.bindings&&e.push(t.bindings),t.code)&&dt(Ge(new Ue(t.code))).forEach((function(t){return e.push(t.binding)}));return e}})}yt.set(ue,(function(e){var t=ht(e.expression);return{line:e.line,startOffset:e.startOffset,isMarker:e.isMarker,binding:{name:e.identifier.name,evaluate:t}}})),yt.set(le,(function(e){var t=1===e.headingLevel?"important":"normal",n=""!==e.text?"<h".concat(e.headingLevel," class=").concat(t,">").concat(e.text,"</h").concat(e.headingLevel,">"):"";return{line:e.line,startOffset:e.startOffset,isMarker:e.isMarker,binding:{name:"#outline",evaluate:function(){if(1===e.headingLevel&&""!==e.text)return new G(n);var t=R("#outline").as(G);return new G(t.value+n)}}}}));var bt=function(){function e(t,n,r){Object(s.a)(this,e),this.binding=null,this.enabled=!1,this.scope=t,this.name=n,this.activationCallback=r}return Object(f.a)(e,[{key:"bind",value:function(e){this.disable(),this.binding={name:this.name,evaluate:e},this.enable()}},{key:"unbind",value:function(){this.disable(),this.binding=null}},{key:"enable",value:function(){this.binding&&!this.enabled&&(this.scope.push(this.binding),this.enabled=!0,this.activationCallback&&this.activationCallback(!0))}},{key:"disable",value:function(){this.binding&&this.enabled&&(this.scope.pop(this.binding),this.enabled=!1,this.activationCallback&&this.activationCallback(!1))}},{key:"toggle",value:function(){this.enabled?this.disable():this.enable()}}]),e}();function xt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tt=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(s.a)(this,e),this.nextStatement=0,this.sideEffects=new Map,this.startTime=null,this.globalScope=new B,this.globalScope.push(vt),this.timeOverride=new bt(this.globalScope,"time"),r.forEach((function(e){gt(n.globalScope,e),e.sideEffects&&n.sideEffects.set(e.name,e.sideEffects)})),this.rootEvaluator=function(){var e,t=xt(n.sideEffects);try{for(t.s();!(e=t.n()).done;){var r,a=Object(c.a)(e.value,2),i=a[0],o=a[1],u=R(i).as(B),l=xt(o);try{for(l.s();!(r=l.n()).done;){var s=r.value;R(s,u)}}catch(f){l.e(f)}finally{l.f()}}}catch(f){t.e(f)}finally{t.f()}return new X(0)};var a=new Ue(t,0,"smeli");this.statements=dt(Ge(a)),this.messages=a.messages}return Object(f.a)(e,[{key:"push",value:function(e,t,n){var r=new Ue(e,t||0,"smeli");r.currentLine=n||0;var a=dt(Ge(r));return this.messages=r.messages,0===r.messages.length&&(this.statements=this.statements.concat(a)),r.messages}},{key:"pop",value:function(e){if(e>this.statements.length)throw new Error("Trying to remove more statements than the engine currently has");var t=this.statements.length-e;this.nextStatement>t&&this.step(t-this.nextStatement),this.statements.length=t}},{key:"step",value:function(e){for(;e>0&&this.nextStatement<this.statements.length;){var t=this.statements[this.nextStatement++];this.globalScope.push(t.binding),e--}for(;e<0&&this.nextStatement>0;){var n=this.statements[--this.nextStatement];this.globalScope.pop(n.binding),e++}return this.globalScope}},{key:"next",value:function(){for(;this.nextStatement<this.statements.length&&(this.step(1),!(this.nextStatement<this.statements.length&&this.statements[this.nextStatement].isMarker)););}},{key:"previous",value:function(){for(;this.nextStatement>0&&(this.step(-1),!this.statements[this.nextStatement].isMarker););}},{key:"update",value:function(e){null===this.startTime&&(this.startTime=e);var t=new X(.001*(e-this.startTime));this.timeOverride.bind((function(){return t}));try{z(this.rootEvaluator,this.globalScope)}catch(r){var n=r.message+"\n";throw r.smeliStack&&(n+=r.smeliStack.map((function(e){return"from: "+e})).join("\n")),new Error(n)}}}]),e}(),kt=new Map;kt.set(ee,(function(e){var t=e.value;return Ee.call(t).as(G).value})),kt.set(te,(function(e){return[].concat(Object(V.a)(e.scopeNames),[e.name]).join(".")})),kt.set(ne,(function(e){var t=e.statements.map(Ot),n="";return e.prefixExpression&&(n=Ot(e.prefixExpression)+" "),"".concat(n,"{\n").concat(t.join("\n"),"\n}")})),kt.set(re,(function(e){var t=e.args.map((function(e){return Ot(e)})),n=Ot(e.body);return"".concat(t.join(", ")," => ").concat(n)})),kt.set(ae,(function(e){var t=Ot(e.identifier),n=e.args.map(Ot);return"".concat(t,"(").concat(n.join(", "),")")})),kt.set(ue,(function(e){var t=e.identifier.name,n=Ot(e.expression);return"".concat(t,": ").concat(n,"\n")})),kt.set(le,(function(e){var t="#".repeat(e.headingLevel),n=e.isMarker?">":"";return"".concat(t).concat(n," ").concat(e.text,"\n")}));var Et=new Map;function Ot(e){return ce(e,kt)}Et.set(he,"+"),Et.set(Oe,"-"),Et.set(ke,"*"),Et.set(de,"/"),kt.set(ie,(function(e){var t=Ot(e.lhs),n=Ot(e.rhs),r=Et.get(e.trait);return"".concat(t," ").concat(r," ").concat(n)})),Ee.implement({argumentTypes:[j],returnType:G,call:function(e){return new G(Ot(e.expression))}});var jt=n(142),St=n(150),Ct=n.n(St),At=(n(151),n(152),n(155)),_t=n(153),Mt=Object(At.a)();function Rt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}Mt.use(Object(_t.a)());var It=function(e){Object(h.a)(n,e);var t=Pt(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object(s.a)(this,n),(r=t.call(this)).node=e,r.eventListeners=a,r.observers=i;for(var o=0,u=Object.keys(r.eventListeners);o<u.length;o++){var l=u[o],c=r.eventListeners[l];r.node.addEventListener(l,c)}var f,v=Rt(r.observers);try{for(v.s();!(f=v.n()).done;){var m=f.value;m.observe(r.node)}}catch(p){v.e(p)}finally{v.f()}return r}return Object(f.a)(n,[{key:"dispose",value:function(){for(var e=0,t=Object.keys(this.eventListeners);e<t.length;e++){var n=t[e],r=this.eventListeners[n];this.node.removeEventListener(n,r)}var a,i=Rt(this.observers);try{for(i.s();!(a=i.n()).done;){a.value.unobserve(this.node)}}catch(o){i.e(o)}finally{i.f()}}},{key:"__str__",value:function(){return"<".concat(this.node.tagName.toLowerCase()," />")}}]),n}(p);It.typeName="dom_node";var Nt=function(e){Object(h.a)(n,e);var t=Pt(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).sheet=Mt.createStyleSheet(e).attach(),r}return Object(f.a)(n,[{key:"dispose",value:function(){Mt.removeStyleSheet(this.sheet)}}]),n}(p);Nt.typeName="dom_styles";var Lt='\n  default_themes: {\n    light: {\n      is_dark: false\n      background_opacity: 1\n\n      colors: {\n        background: color_from_hex("#ffffff")\n        primary: color_from_hex("#c5e1a5")\n        secondary: color_from_hex("#80cbc4")\n\n        on_background: color_from_hex("#000000")\n        on_primary: color_from_hex("#000000")\n        on_secondary: color_from_hex("#000000")\n      }\n    }\n\n    dark: {\n      is_dark: true\n      background_opacity: 1\n\n      colors: {\n        background: color_from_hex("#121212")\n        primary: color_from_hex("#deab54")\n        secondary: color_from_hex("#2497c8")\n\n        on_background: color_from_hex("#ffffff")\n        on_primary: color_from_hex("#000000")\n        on_secondary: color_from_hex("#000000")\n      }\n    }\n  }\n\n  theme: default_themes.light\n';function Bt(){var e=P().as(B).root(),t=R("ui",e).as(B);return R("theme",t).as(B).evaluateNested({is_dark:E,background_opacity:X,colors:{background:Q,primary:Q,secondary:Q,on_background:Q,on_primary:Q,on_secondary:Q}})}var Ut=function(e){return{"--fluid-ratio":"calc((100vw - 300px) / 700)","background-color":e.colors.background.toCssColor(e.background_opacity.value),color:e.colors.on_background.toCssColor(),"font-family":"verdana","font-size":"clamp(16px, calc(16px + 8 * var(--fluid-ratio)), 24px)","--gutter":"clamp(4px, calc(2px + 4 * var(--fluid-ratio)), 8px)","--negative-gutter":"calc(var(--gutter) * -1)",display:"flex","flex-direction":"column",padding:0,"& .important":{opacity:.87},"& .normal":{opacity:.6},"& .disabled":{opacity:.38},"& .widget":{flex:"1 0","box-sizing":"border-box",margin:"var(--gutter)"},"& .container":{margin:0},"& .direction-row > .container":{"margin-block-start":"var(--negative-gutter)","margin-block-end":"var(--negative-gutter)","margin-inline-start":0,"margin-inline-end":0,"&:first-child":{"margin-inline-start":"var(--negative-gutter)"},"&:last-child":{"margin-inline-end":"var(--negative-gutter)"}},"& .direction-column > .container":{"margin-inline-start":"var(--negative-gutter)","margin-inline-end":"var(--negative-gutter)","margin-block-start":0,"margin-block-end":0,"&:first-child":{"margin-block-start":"var(--negative-gutter)"},"&:last-child":{"margin-block-end":"var(--negative-gutter)"}},"@media(orientation: portrait)":{"& .direction-column.responsive > .container":{"margin-block-start":"var(--negative-gutter)","margin-block-end":"var(--negative-gutter)","margin-inline-start":0,"margin-inline-end":0,"&:first-child":{"margin-inline-start":"var(--negative-gutter)"},"&:last-child":{"margin-inline-end":"var(--negative-gutter)"}},"& .direction-row.responsive > .container":{"margin-inline-start":"var(--negative-gutter)","margin-inline-end":"var(--negative-gutter)","margin-block-start":0,"margin-block-end":0,"&:first-child":{"margin-block-start":"var(--negative-gutter)"},"&:last-child":{"margin-block-end":"var(--negative-gutter)"}}}}},Ft=function(e){return{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center","& input":{display:"block","box-sizing":"border-box",margin:0,padding:"1px",width:"100%",height:"32px","min-height":"32px",color:"inherit","-webkit-appearance":"none","-moz-appearance":"none",background:"transparent","border-radius":"16px","border-color":e.colors.secondary.toCssColor(0),transition:"background .2s, border-color .2s","&.override":{background:e.colors.on_background.toCssColor(.1),border:"1px solid "+e.colors.secondary.toCssColor(1),padding:0},"&:focus":{outline:"none"},"&::-moz-focus-outer":{border:0},"&::-webkit-slider-thumb":{"-webkit-appearance":"none",background:e.colors.secondary.toCssColor(),"box-sizing":"border-box",width:"32px",height:"32px",margin:"-16px 0px 0px 0px","border-radius":"16px",border:"none"},"&::-moz-range-thumb":{background:e.colors.secondary.toCssColor(),"box-sizing":"border-box",width:"32px",height:"32px","border-radius":"16px",border:"none"},"&::-webkit-slider-thumb::hover":{opacity:.87},"&::-moz-range-thumb::hover":{opacity:.87},"&::-webkit-slider-runnable-track":{background:e.colors.on_background.toCssColor(.6),height:"1px","box-shadow":"0px 2px 2px "+e.colors.on_background.toCssColor(.1),"border-radius":"2px"},"&::-moz-range-track":{background:e.colors.on_background.toCssColor(.6),height:"1px","box-shadow":"0px 2px 2px "+e.colors.on_background.toCssColor(.1),"border-radius":"2px",margin:"0px 16px"}},"& .label":{"font-size":"0.9em",padding:"0.4em",overflow:"hidden",height:"1em","line-height":"1em"},"& .override + .label":{opacity:.87}}},Dt={name:"#styles",evaluate:function(){var e=Bt();return new Nt({container:Ut(e),outline:{"text-align":"center",overflow:"hidden","& h1":{"font-size":"1.4em",margin:"0.4em 0",padding:"0"},"& h2,h3,h4,h5,h6":{"font-size":"1.2em",margin:"0.2em 0",padding:"0"}},shader:{display:"flex",flex:1,position:"relative","& canvas":{display:"block",position:"absolute",left:0,right:0,top:0,bottom:0},"& .errors":{display:"block",position:"absolute",left:0,right:0,top:0,bottom:0,margin:0,padding:"8px",opacity:0,background:"#822",color:"rgba(255, 255, 255, 0.87)","white-space":"pre-wrap","overflow-wrap":"break-word","font-size":"0.9em"}},slider:Ft(e),stack:{position:"relative",display:"flex",flex:1,margin:0,padding:0,"& > .layer":{display:"flex",position:"absolute",left:0,right:0,top:0,bottom:0}},surface:{display:"flex","box-sizing":"border-box",overflow:"hidden","&.direction-row":{"flex-direction":"row"},"&.direction-column":{"flex-direction":"column","justify-content":"space-evenly"},"@media(orientation: portrait)":{"&.direction-column.responsive":{"flex-direction":"row"},"&.direction-row.responsive":{"flex-direction":"column","justify-content":"space-evenly"}},padding:"var(--gutter)","border-radius":"0px","&.fade":{opacity:0,transition:"opacity .5s"},"&.elevated":{margin:"var(--gutter)","border-radius":"16px"}},textbox:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center","text-align":"center","& > p":{margin:0,padding:0}}})}},Vt=function(){var e=P().as(B).root(),t=R("ui",e).as(B);return R("#styles",t).as(Nt).sheet.classes},qt={name:"outline",evaluate:function(){return U([{name:"#ui:node",evaluate:function(){var e=Vt(),t=document.createElement("div");t.className="widget "+e.outline;var n=new It(t);return function(){var e=R("#outline").as(G);return t.innerHTML=e.value,n}}}])}};function Ht(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var Xt=function(e){Object(h.a)(n,e);var t=$t(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).program=null,e.vbo=null,e.uniformInfo=[],e.canvas=document.createElement("canvas"),e.gl=e.canvas.getContext("webgl",{premultipliedAlpha:!1}),e}return Object(f.a)(n,[{key:"loadShader",value:function(e,t){if(null===this.program)throw new Error("Internal error: shader program should exist at this point");var n=this.gl.createShader(e);if(this.gl.shaderSource(n,t),this.gl.compileShader(n),!this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)){var r=this.gl.getShaderInfoLog(n);throw this.gl.deleteShader(n),new Error("Failed to compile shader:\n".concat(r))}return this.gl.attachShader(this.program,n),this.gl.deleteShader(n),n}},{key:"loadProgram",value:function(e,t){if(null!==this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.program=this.gl.createProgram(),this.loadShader(this.gl.VERTEX_SHADER,e),this.loadShader(this.gl.FRAGMENT_SHADER,t),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){var n=this.gl.getProgramInfoLog(this.program);throw this.gl.deleteProgram(this.program),new Error("Shader link failed:\n".concat(n))}this.gl.bindAttribLocation(this.program,0,"position");var r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS),a=new Map;a.set(this.gl.FLOAT,X),a.set(this.gl.FLOAT_VEC2,Z),a.set(this.gl.FLOAT_VEC3,Q);for(var i=0;i<r;i++){var o=this.gl.getActiveUniform(this.program,i);if(!a.has(o.type))throw new Error("Unsupported uniform type: "+o.type);this.uniformInfo.push({name:o.name,location:this.gl.getUniformLocation(this.program,o.name),type:a.get(o.type)})}}},{key:"loadGeometry",value:function(e){null!==this.vbo&&(this.gl.deleteBuffer(this.vbo),this.vbo=null),this.vbo=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vbo),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW)}},{key:"dispose",value:function(){this.program&&(this.gl.deleteProgram(this.program),this.program=null),null!==this.vbo&&(this.gl.deleteBuffer(this.vbo),this.vbo=null)}}]),n}(p);Xt.typeName="gl_draw_context";var Yt={name:"shader",evaluate:function(){return U([{name:"code",evaluate:function(){return new G("\n  precision mediump float;\n\n  uniform float time; // seconds\n  varying vec2 uv;\n\n  void main()\n  {\n    gl_FragColor = vec4(uv, sin(time), 1.0);\n  }\n")}},{name:"uniforms",evaluate:function(){return U()}},{name:"#gl:context",evaluate:function(){return new Xt}},{name:"#gl:start_time",evaluate:function(){return new X(.001*Date.now())}},{name:"#pixel_size",evaluate:function(){return new Z(0,0)}},{name:"#ui:node",evaluate:function(){var e=Vt(),t=document.createElement("div");t.className="container "+e.shader;var n=R("#gl:context").as(Xt);t.appendChild(n.canvas);var r=document.createElement("pre");r.className="errors",t.appendChild(r);var a=P().as(B),i=new bt(a,"#pixel_size"),o=new ResizeObserver((function(e){var t=e[e.length-1].contentRect,n=t.width,r=t.height;i.bind((function(){return new Z(n,r)}))})),u=new It(t,{},[o]);return n.loadGeometry([-1,-1,-1,1,1,-1,1,1]),function(){var e=R("code").as(G);try{n.loadProgram("\n  uniform vec2 resolution;\n  attribute vec2 position;\n  varying vec2 uv;\n\n  void main()\n  {\n      uv = position;\n\n      if (resolution.x > resolution.y)\n      {\n        uv.x *= resolution.x / resolution.y;\n      }\n      else\n      {\n        uv.y *= resolution.y / resolution.x;\n      }\n      gl_Position = vec4(position, 0.0, 1.0);\n  }\n",e.value),r.innerHTML="",r.style.opacity="0"}catch(a){return r.innerHTML=a.message.replace("\n","<br />"),r.style.opacity="1",u}var t=R("uniforms").as(B);return function(){var e=R("#pixel_size").as(Z);if(0===e.x||0===e.y)return u;n.canvas.width=e.x,n.canvas.height=e.y;var r=n.uniformInfo.map((function(n){var r="resolution"===n.name?e:R(n.name,t).as(n.type);return{name:n.name,location:n.location,value:r}}));return function(e,t,n){var r=e.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.viewport(0,0,t.x,t.y),r.useProgram(e.program);var a,i=Ht(n);try{for(i.s();!(a=i.n()).done;){var o=a.value,u=(o.name,o.location),l=o.value;l.is(X)?r.uniform1f(u,l.value):l.is(Z)?r.uniform2f(u,l.x,l.y):l.is(Q)&&r.uniform3f(u,l.x,l.y,l.z)}}catch(c){i.e(c)}finally{i.f()}r.bindBuffer(r.ARRAY_BUFFER,e.vbo),r.enableVertexAttribArray(0),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0),r.drawArrays(r.TRIANGLE_STRIP,0,4)}(n,e,r),u}}}}])}},Gt={name:"stack",evaluate:function(){return U([{name:"item0",evaluate:function(){return new X(0)}},{name:"item1",evaluate:function(){return new X(0)}},{name:"item2",evaluate:function(){return new X(0)}},{name:"item3",evaluate:function(){return new X(0)}},{name:"#ui:node",evaluate:function(){var e=Vt(),t=document.createElement("div");t.className="".concat(e.stack," container");var n=new It(t);return function(){var e=[R("item0"),R("item1"),R("item2"),R("item3")].filter((function(e){return e.is(B)})).map((function(e){return R("#ui:node",e).as(It)})),r=t.childNodes;e.forEach((function(e,n){if(r.length<=n){var a=document.createElement("div");a.className="layer",a.appendChild(e.node),t.appendChild(a)}else{var i=r[n];if(i.firstChild!==e.node){var o=document.createElement("div");o.className="layer",o.appendChild(e.node),t.replaceChild(o,i)}}}));for(var a=e.length;a<r.length;a++)t.removeChild(r[a]);return n}}}])}},Jt={name:"surface",evaluate:function(){return U([{name:"direction",evaluate:function(){return new G("row")}},{name:"flex",evaluate:function(){return new X(1)}},{name:"responsive",evaluate:function(){return new E(!1)}},{name:"fade",evaluate:function(){return new E(!1)}},{name:"color",evaluate:function(){return new G("none")}},{name:"text_color",evaluate:function(){return new G("default")}},{name:"elevation",evaluate:function(){return new X(0)}},{name:"item0",evaluate:function(){return new X(0)}},{name:"item1",evaluate:function(){return new X(0)}},{name:"item2",evaluate:function(){return new X(0)}},{name:"item3",evaluate:function(){return new X(0)}},{name:"item4",evaluate:function(){return new X(0)}},{name:"item5",evaluate:function(){return new X(0)}},{name:"item6",evaluate:function(){return new X(0)}},{name:"item7",evaluate:function(){return new X(0)}},{name:"#ui:node",evaluate:function(){var e=Bt(),t=Vt(),n=R("direction").as(G),r=R("flex").as(X),a=R("responsive").as(E),i=R("fade").as(E),o=R("color"),u=R("text_color"),l=document.createElement("div");l.className="".concat(t.surface," direction-").concat(n.value," ").concat(a.value?"responsive":""," ").concat(i.value?"fade":""),0!==r.value&&(l.style.flex=r.value.toString()),i.value&&requestAnimationFrame((function(){l.style.opacity="1"}));var c=null,s=null;if(u.is(Q)&&(s=u),o.is(Q))c=o;else if(o.is(G))switch(o.value){case"background":c=e.colors.background,s=s||e.colors.on_background;break;case"primary":c=e.colors.primary,s=s||e.colors.on_primary;break;case"secondary":c=e.colors.secondary,s=s||e.colors.on_secondary}var f=e.is_dark.value?"#0008":"#0004",v=R("elevation").as(X);if(0!==v.value){var m=Math.min(Math.max(v.value,-16),16);if(l.style.boxShadow="".concat(m<0?"inset":""," 0px 2px ").concat(Math.abs(m)+4,"px ").concat(f),l.classList.add("elevated"),null!==c&&e.is_dark.value){var p=m/256;p>0?p=Math.pow(p,1/2.2):p/=2,c=he.call(c,ke.call(new Q(1,1,1),new X(p))).as(Q)}}else l.classList.add("container");null!==c&&(l.style.backgroundColor=c.toCssColor()),null!==s&&(l.style.color=s.toCssColor());var h=new It(l);return function(){var e=[R("item0"),R("item1"),R("item2"),R("item3"),R("item4"),R("item5"),R("item6"),R("item7")].filter((function(e){return e.is(B)})).map((function(e){return R("#ui:node",e).as(It)})),t=l.childNodes;e.forEach((function(e,n){if(t.length<=n)l.appendChild(e.node);else{var r=t[n];r!==e.node&&l.replaceChild(e.node,r)}}));for(var n=e.length;n<t.length;n++)l.removeChild(t[n]);return h}}}])}},Zt={name:"slider",evaluate:function(){return U([{name:"label",evaluate:function(){return new G("")}},{name:"min",evaluate:function(){return new X(0)}},{name:"max",evaluate:function(){return new X(100)}},{name:"step",evaluate:function(){return new X(1)}},{name:"value",evaluate:function(){return new X(0)}},{name:"#ui:node",evaluate:function(){var e=Vt(),t=document.createElement("div");t.className="widget "+e.slider;var n=document.createElement("input");t.appendChild(n),n.type="range";var r=document.createElement("div");t.appendChild(r),r.className="label normal";var a=P().as(B),i=new bt(a,"value",(function(e){e?n.classList.add("override"):n.classList.remove("override")})),o=new It(t,{input:function(e){var t=parseFloat(n.value);i.bind((function(){return new X(t)}))},mousedown:function(e){2===e.button&&(e.preventDefault(),i.toggle())},mouseup:function(){return n.blur()},contextmenu:function(e){return e.preventDefault()}});return function(){var e=R("min").as(X),t=R("max").as(X),a=R("step").as(X),i=R("value").as(X);n.min=e.value.toString(),n.max=t.value.toString(),n.step=a.value.toString(),n.value=i.value.toString();var u=R("label").as(G);return r.innerHTML=u.value,r.style.display=""!==u.value?"block":"none",o}}}])}},Kt={name:"textbox",evaluate:function(){return U([{name:"text",evaluate:function(){return new G("")}},{name:"important",evaluate:function(){return new E(!1)}},{name:"size",evaluate:function(){return new X(1)}},{name:"#ui:node",evaluate:function(){var e=Vt(),t=R("text").as(G),n=R("important").as(E),r=R("size").as(X),a=document.createElement("div");a.className="widget "+e.textbox;var i=document.createElement("p");return i.innerHTML=t.value.replace(/\n/g,"<br />"),i.className=n.value?"important":"normal",i.style.fontSize=r.value+"em",a.appendChild(i),new It(a)}}])}},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.container,n=void 0===t?document.body:t;return n.innerHTML="",{name:"ui",sideEffects:["#update"],bindings:[{name:"page",evaluate:function(){return R("outline")}},W("color_from_hex",[{argumentTypes:[G],returnType:Q,call:function(e){var t=e.value;if(0===t.length)throw new Error("Invalid color: empty string");if("#"===t[0]&&(t=t.substr(1)),3===(t=t.toLowerCase()).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),!t.match(/[0-9a-f]{6}/))throw new Error("Invalid color: must be exactly 3 or 6 hex digits");var n=parseInt(t.substr(0,2),16)/255,r=parseInt(t.substr(2,2),16)/255,a=parseInt(t.substr(4,2),16)/255;return new Q(n,r,a)}}]),{name:"#update",evaluate:function(){var e=Vt();return n.className=e.container,function(){var e=R("page").as(B);return function(){var t=R("#ui:node",e).as(It);if(n.hasChildNodes()){var r=n.firstChild;r!==t.node&&n.replaceChild(t.node,r)}else n.appendChild(t.node);return t}}}},qt,Yt,Gt,Jt,Zt,Kt,Dt],code:"\n    ".concat(Lt,"\n    ")}},en={name:"#styles",evaluate:function(){Bt();return new Nt({editor:{flex:1,"font-size":"0.9em"}})}},tn={name:"editor",evaluate:function(){return U([{name:"code",evaluate:function(){return new G("# Hello, World!")}},{name:"#ui:node",evaluate:function(e){var t,n,r=(t=P().as(B).root(),n=R("ace",t).as(B),R("#styles",n).as(Nt).sheet.classes),a=document.createElement("pre");a.className="container "+r.editor;var i=Ct.a.edit(a,{theme:"ace/theme/monokai",mode:"ace/mode/glsl"}),o=null;i.session.on("change",(function(){var t=i.session.getValue();setTimeout((function(){o&&e.pop(o),o={name:"code",evaluate:function(){return new G(t)}},e.push(o)}),0)}));var u=new It(a);return function(){var e=R("code").as(G);return o||(i.session.setValue(e.value),i.selection.clearSelection()),u}}}])}},nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(jt.a)(e),{name:"ace",bindings:[tn,en]}},rn=n(154),an=n.n(rn),on=(n(133),{name:"#styles",evaluate:function(){Bt();return new Nt({formula:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center","text-align":"center"}})}}),un={name:"formula",evaluate:function(){return U([{name:"code",evaluate:function(){return new G("l = \\sqrt(x^2 + y^2)")}},{name:"size",evaluate:function(){return new X(1.4)}},{name:"#ui:node",evaluate:function(){var e,t,n=(e=P().as(B).root(),t=R("katex",e).as(B),R("#styles",t).as(Nt).sheet.classes),r=R("code").as(G),a=R("size").as(X),i=document.createElement("div");i.className="widget "+n.formula;try{an.a.render(r.value,i);var o=i.querySelector(".katex");o.classList.add("important"),o.style.fontSize=a.value+"em"}catch(u){i.innerHTML="<p>"+u.message+"</p>",i.classList.add("normal")}return new It(i)}}])}},ln={alpha:"\\alpha",Alpha:"A",beta:"\\beta",Beta:"B",gamma:"\\gamma",Gamma:"\\Gamma",delta:"\\delta",Delta:"\\Delta",epsilon:"\\epsilon",Epsilon:"E",zeta:"\\zeta",Zeta:"Z",eta:"\\eta",Eta:"H",theta:"\\theta",Theta:"\\Theta",iota:"\\iota",Iota:"I",kappa:"\\kappa",Kappa:"K",lambda:"\\lambda",Lambda:"\\Lambda",mu:"\\mu",Mu:"M",nu:"\\nu",Nu:"N",xi:"\\xi",Xi:"\\Xi",pi:"\\pi",Pi:"\\Pi",rho:"\\rho",Rho:"P",sigma:"\\sigma",Sigma:"\\Sigma",tau:"\\tau",Tau:"T",upsilon:"\\upsilon",Upsilon:"\\Upsilon",phi:"\\phi",Phi:"\\Phi",chi:"\\chi",Chi:"X",psi:"\\psi",Psi:"\\Psi",omega:"\\omega",Omega:"\\Omega"},cn=new Map;cn.set(he,"+"),cn.set(Oe,"-"),cn.set(ke,"\\times");var sn=new Map;sn.set("abs",(function(e,t){return"\\left| ".concat(t.join(", ")," \\right|")})),sn.set("ceil",(function(e,t){return"\\left\\lceil ".concat(t.join(", ")," \\right\\rceil")})),sn.set("dot",(function(e,t){return"".concat(t[0]," \\cdot ").concat(t[1])})),sn.set("exp",(function(e,t){return"e^{".concat(t.join(", "),"}")})),sn.set("floor",(function(e,t){return"\\left\\lfloor ".concat(t.join(", ")," \\right\\rfloor")})),sn.set("length",(function(e,t){return"\\left\\Vert ".concat(t.join(", ")," \\right\\Vert")})),sn.set("pow",(function(e,t){return"{".concat(t[0],"}^{").concat(t[1],"}")}));var fn=new Map;fn.set(ee,(function(e){var t=e.value;return t.is(Z)?"\\[ \\left( \\begin{array}{c}\n        ".concat(t.x," \\\\\n        ").concat(t.y," \\\\\n      \\end{array} \\right) \\]"):Ee.call(t).as(G).value})),fn.set(te,(function(e){var t=e.name;return ln[t]||t})),fn.set(re,(function(e){return e.args.map((function(e){return e.name})).join(", ")+" \\Rightarrow "+ce(e.body,fn)})),fn.set(ae,(function(e){var t=ce(e.identifier,fn),n=e.args.map((function(e){return ce(e,fn)})),r=sn.get(t);return r?r(t,n):t+"("+n.join(", ")+")"})),fn.set(ie,(function(e){var t=ce(e.lhs,fn),n=ce(e.rhs,fn);return e.trait===de?"\\frac{"+t+"}{"+n+"}":t+" "+cn.get(e.trait)+" "+n}));var vn=W("transpile",[{argumentTypes:[j],returnType:G,call:function(e){var t=function(e){var t=ln[e.name]||e.name;if(e.expression.constructor===re){var n=e.expression;return t+"("+n.args.map((function(e){return e.name})).map((function(e){return ln[e]||e})).join(", ")+") = "+ce(n.body,fn)}return t+" = "+ce(e.expression,fn)}(e);return new G(t)}}]),mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(jt.a)(e),{name:"katex",bindings:[un,on,vn]}};function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var a=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var hn=function(e){Object(h.a)(n,e);var t=pn(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this)).render=e,r}return n}(p);function yn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hn.typeName="plot_item";var gn={name:"angle",evaluate:function(){return U([{name:"point0",evaluate:function(){return new Z(-1,.3)}},{name:"point1",evaluate:function(){return new Z(.4,.2)}},{name:"point2",evaluate:function(){return new Z(-.2,-.9)}},{name:"right",evaluate:function(){return new E(!1)}},{name:"color",evaluate:function(){return Bt().colors.primary}},{name:"label",evaluate:function(){return new G("")}},{name:"#plot:item",evaluate:function(){for(var e=[],t=0;t<3;t++){var n=R("point"+t).as(Z);e.push(n)}var r=R("right").as(E),a=R("color").as(Q),i=R("label").as(G);return new hn((function(t){var n=t.context,o=t.viewport,u=e.map((function(e){return o.toPixels(e.x,e.y)})),l={x:u[0].x-u[1].x,y:u[0].y-u[1].y},c={x:u[2].x-u[1].x,y:u[2].y-u[1].y},s=Math.atan2(l.y,l.x),f=Math.atan2(c.y,c.x);if(n.strokeStyle=a.toCssColor(.83),n.fillStyle=a.toCssColor(.38),n.lineWidth=2,r.value){var v=function(e){var t=1/Math.sqrt(e.x*e.x+e.y*e.y);e.x*=t,e.y*=t};v(l),v(c);var m=[{x:u[1].x+24*l.x,y:u[1].y+24*l.y},{x:u[1].x+24*(l.x+c.x),y:u[1].y+24*(l.y+c.y)},{x:u[1].x+24*c.x,y:u[1].y+24*c.y}];n.beginPath(),n.moveTo(u[1].x,u[1].y);for(var p=0,h=m;p<h.length;p++){var y=h[p];n.lineTo(y.x,y.y)}n.closePath()}else n.setLineDash([4,4]),n.beginPath(),n.arc(u[1].x,u[1].y,24,s,f),n.stroke(),n.setLineDash([]),n.lineTo(u[1].x,u[1].y),n.closePath();n.fill(),n.strokeStyle=a.toCssColor(.6),n.lineWidth=2,n.beginPath(),n.moveTo(u[0].x,u[0].y);var d,g=yn(u.slice(1));try{for(g.s();!(d=g.n()).done;){var b=d.value,x=b.x,w=b.y;n.lineTo(x,w)}}catch(E){g.e(E)}finally{g.f()}if(n.stroke(),""!==i.value){var T=s+(f-s+2*Math.PI)%(2*Math.PI)*.5,k={x:u[1].x+24*Math.cos(T)*2,y:u[1].y+24*Math.sin(T)*2};n.textAlign="center",n.textBaseline="middle",n.fillStyle=a.toCssColor(.83),n.fillText(i.value,k.x,k.y),n.textAlign="start",n.textBaseline="alphabetic"}}))}}])}},bn={name:"circle",evaluate:function(){return U([{name:"center",evaluate:function(){return new Z(0,0)}},{name:"radius",evaluate:function(){return new X(1)}},{name:"slice",evaluate:function(){return new Z(0,2*Math.PI)}},{name:"color",evaluate:function(){return Bt().colors.primary}},{name:"fill",evaluate:function(){return new E(!0)}},{name:"#plot:item",evaluate:function(){var e=R("center").as(Z),t=R("radius").as(X),n=R("slice").as(Z),r=R("color").as(Q),a=R("fill").as(E);return new hn((function(i){var o=i.context,u=i.viewport,l=u.toPixels(e.x,e.y);o.strokeStyle=r.toCssColor(.83),o.lineWidth=2,o.beginPath(),o.ellipse(l.x,l.y,t.value*u.pixelTransformX[0],-t.value*u.pixelTransformY[0],0,-n.y,-n.x);var c=2*Math.PI,s=((n.y-n.x)%c+c)%c;s>Math.PI&&(s=c-s),s>=1/360*c&&o.lineTo(l.x,l.y),o.closePath(),o.stroke(),a.value&&(o.fillStyle=r.toCssColor(.38),o.fill())}))}}])}},xn={name:"function",evaluate:function(){return U([{name:"function",evaluate:function(){return R("sin")}},{name:"color",evaluate:function(){return Bt().colors.primary}},{name:"#plot:item",evaluate:function(){var e=R("function");if(!e.is(D)&&!e.is(H))throw new Error('"function" is not a function');var t=e.makeTransientEvaluator();return function(){var e=R("color").as(Q);return new hn((function(n){var r=n.context,a=n.viewport,i=a.pixelSize.x/2|0,o=(a.bounds[2]-a.bounds[0])/(i-1);r.lineWidth=4,r.lineJoin="round",r.strokeStyle=e.toCssColor(.83),r.beginPath();for(var u=0;u<i;u++){var l=a.bounds[0]+u*o,c=t(new X(l)).as(X).value,s=a.toPixels(l,c);0===u?r.moveTo(s.x,s.y):r.lineTo(s.x,s.y)}r.stroke()}))}}}])}},wn=n(28),Tn=n.n(wn);function kn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var On=Tn.a.mark(jn);function jn(e,t,n,r){var a,i,o;return Tn.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(0!==(n=Math.abs(n))&&0!==r){u.next=3;break}return u.abrupt("return");case 3:n/=r,a=Math.ceil(e/n),i=Math.floor(t/n),o=a;case 7:if(!(o<=i)){u.next=13;break}return u.next=10,[o*n,o%r!=0];case 10:o++,u.next=7;break;case 13:case"end":return u.stop()}}),On)}var Sn={name:"grid",evaluate:function(){return U([{name:"color",evaluate:function(){return Bt().colors.on_background}},{name:"step",evaluate:function(){return new Z(1,1)}},{name:"axis",evaluate:function(){return new E(!0)}},{name:"subdivisions",evaluate:function(){return new Z(5,5)}},{name:"#plot:item",evaluate:function(){var e=R("color").as(Q),t=R("step").as(Z),n=R("axis").as(E),r=R("subdivisions").as(Z);return new hn((function(a){var i=a.canvas,o=a.context,u=a.viewport,l=e.toCssColor(.38),s=e.toCssColor(.14);if(o.lineWidth=1,0!=t.x){var f,v=kn(jn(u.bounds[1],u.bounds[3],t.y,r.y));try{for(v.s();!(f=v.n()).done;){var m=Object(c.a)(f.value,2),p=m[0],h=m[1],y=u.toPixels(0,p).y;o.strokeStyle=h?s:l,o.beginPath(),o.moveTo(0,y),o.lineTo(i.width,y),o.stroke()}}catch(N){v.e(N)}finally{v.f()}}if(0!=t.y){var d,g=kn(jn(u.bounds[0],u.bounds[2],t.x,r.x));try{for(g.s();!(d=g.n()).done;){var b=Object(c.a)(d.value,2),x=b[0],w=b[1],T=u.toPixels(x,0).x;o.strokeStyle=w?s:l,o.beginPath(),o.moveTo(T,0),o.lineTo(T,i.height),o.stroke()}}catch(N){g.e(N)}finally{g.f()}}if(n.value){var k=u.toPixels(0,0);o.strokeStyle=e.toCssColor(.87),o.fillStyle=e.toCssColor(.87),0!=t.x&&(o.beginPath(),o.moveTo(0,k.y),o.lineTo(i.width,k.y),o.stroke()),0!=t.y&&(o.beginPath(),o.moveTo(k.x,0),o.lineTo(k.x,i.height),o.stroke());var E=o.font;o.font="italic 0.6em math",o.textAlign="center",o.textBaseline="top";var O,j=kn(jn(u.bounds[0],u.bounds[2],t.x,1));try{for(j.s();!(O=j.n()).done;){var S=Object(c.a)(O.value,2),C=S[0],A=(S[1],u.toPixels(C,0).x),_=0==C?-8:0;o.fillText(C.toString(),A+_,k.y+2)}}catch(N){j.e(N)}finally{j.f()}o.textAlign="right",o.textBaseline="middle";var M,R=kn(jn(u.bounds[1],u.bounds[3],t.y,1));try{for(R.s();!(M=R.n()).done;){var z=Object(c.a)(M.value,2),P=z[0];z[1];if(0!=P){var I=u.toPixels(0,P).y;o.fillText(P.toString(),k.x-2,I)}}}catch(N){R.e(N)}finally{R.f()}o.font=E,o.textAlign="start",o.textBaseline="alphabetic"}}))}}])}},Cn={name:"label",evaluate:function(){return U([{name:"position",evaluate:function(){return new Z(0,0)}},{name:"text",evaluate:function(){return new G("")}},{name:"color",evaluate:function(){return Bt().colors.primary}},{name:"#plot:item",evaluate:function(){var e=R("position").as(Z),t=R("text").as(G),n=R("color").as(Q);return new hn((function(r){r.canvas;var a=r.context,i=r.viewport.toPixels(e.x,e.y);a.textAlign="center",a.textBaseline="middle",a.fillStyle=n.toCssColor(.83),a.fillText(t.value,i.x,i.y),a.textAlign="start",a.textBaseline="alphabetic"}))}}])}},An={name:"point",evaluate:function(){return U([{name:"position",evaluate:function(){return new Z(0,0)}},{name:"color",evaluate:function(){return Bt().colors.primary}},{name:"guides",evaluate:function(){return new E(!1)}},{name:"label",evaluate:function(){return new G("")}},{name:"#plot:item",evaluate:function(){var e=R("position").as(Z),t=R("color").as(Q),n=R("guides").as(E),r=R("label").as(G);return new hn((function(a){var i=a.canvas,o=a.context,u=a.viewport.toPixels(e.x,e.y);o.fillStyle=t.toCssColor(1),o.beginPath(),o.arc(u.x,u.y,4,0,2*Math.PI),o.fill(),n.value&&(o.strokeStyle=t.toCssColor(.6),o.lineWidth=1,o.beginPath(),o.moveTo(u.x,0),o.lineTo(u.x,i.height),o.stroke(),o.beginPath(),o.moveTo(0,u.y),o.lineTo(i.width,u.y),o.stroke()),""!=r.value&&(o.textAlign="end",o.fillStyle=t.toCssColor(.83),o.fillText(r.value,u.x-4,u.y-4),o.textAlign="start")}))}}])}};function _n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rn={name:"polygon",evaluate:function(){return U([{name:"point0",evaluate:function(){return new Z(-1,.3)}},{name:"point1",evaluate:function(){return new Z(.4,.2)}},{name:"point2",evaluate:function(){return new X(0)}},{name:"point3",evaluate:function(){return new X(0)}},{name:"point4",evaluate:function(){return new X(0)}},{name:"point5",evaluate:function(){return new X(0)}},{name:"point6",evaluate:function(){return new X(0)}},{name:"point7",evaluate:function(){return new X(0)}},{name:"point8",evaluate:function(){return new X(0)}},{name:"point9",evaluate:function(){return new X(0)}},{name:"point10",evaluate:function(){return new X(0)}},{name:"point11",evaluate:function(){return new X(0)}},{name:"point12",evaluate:function(){return new X(0)}},{name:"point13",evaluate:function(){return new X(0)}},{name:"point14",evaluate:function(){return new X(0)}},{name:"point15",evaluate:function(){return new X(0)}},{name:"color",evaluate:function(){return Bt().colors.primary}},{name:"fill",evaluate:function(){return new E(!0)}},{name:"#plot:item",evaluate:function(){for(var e=[],t=0;t<16;t++){var n=R("point"+t);n.is(Z)&&e.push(n)}var r=R("color").as(Q),a=R("fill").as(E);return new hn((function(t){var n=t.context,i=t.viewport,o=e.map((function(e){return i.toPixels(e.x,e.y)}));n.fillStyle=r.toCssColor(1);var u,l=_n(o);try{for(l.s();!(u=l.n()).done;){var c=u.value,s=c.x,f=c.y;n.beginPath(),n.arc(s,f,4,0,2*Math.PI),n.fill()}}catch(d){l.e(d)}finally{l.f()}n.strokeStyle=r.toCssColor(.83),n.fillStyle=r.toCssColor(.6),n.lineWidth=2,n.beginPath(),n.moveTo(o[0].x,o[0].y);var v,m=_n(o.slice(1));try{for(m.s();!(v=m.n()).done;){var p=v.value,h=p.x,y=p.y;n.lineTo(h,y)}}catch(d){m.e(d)}finally{m.f()}n.lineTo(o[0].x,o[0].y),n.stroke(),a.value&&n.fill()}))}}])}};function zn(e,t,n){var r=Math.cos(t),a=Math.sin(t);return{x:(e.x*r+e.y*a)*n,y:(-e.x*a+e.y*r)*n}}var Pn={name:"vector",evaluate:function(){return U([{name:"start",evaluate:function(){return new Z(0,0)}},{name:"end",evaluate:function(){return new Z(1,1)}},{name:"color",evaluate:function(){return Bt().colors.primary}},{name:"label",evaluate:function(){return new G("")}},{name:"#plot:item",evaluate:function(){var e=R("start").as(Z),t=R("end").as(Z),n=R("color").as(Q),r=R("label").as(G);return new hn((function(a){a.canvas;var i=a.context,o=a.viewport,u=o.toPixels(e.x,e.y),l=o.toPixels(t.x,t.y),c={x:l.x-u.x,y:l.y-u.y},s=Math.sqrt(c.x*c.x+c.y*c.y);c.x/=s,c.y/=s;var f=.8*Math.PI,v=zn(c,f,16),m=zn(c,-f,16);i.fillStyle=n.toCssColor(1),i.lineCap="round",i.lineJoin="round",i.beginPath(),i.arc(u.x,u.y,4,0,2*Math.PI),i.fill(),i.strokeStyle=n.toCssColor(.83),i.lineWidth=4,i.beginPath(),i.moveTo(u.x,u.y),i.lineTo(l.x,l.y),i.lineTo(l.x+v.x,l.y+v.y),i.moveTo(l.x,l.y),i.lineTo(l.x+m.x,l.y+m.y),i.stroke();var p=zn(c,.5*Math.PI,16);p.y>0&&(p.x=-p.x,p.y=-p.y);var h={x:.5*(u.x+l.x)+p.x,y:.5*(u.y+l.y)+p.y};if(""!=r.value){i.textAlign=p.x>0?"start":"end",i.textBaseline="middle",i.font="bold "+i.font,i.fillStyle=n.toCssColor(.83),i.fillText(r.value,h.x,h.y),i.textAlign="start",i.textBaseline="alphabetic",i.font=i.font.substr("bold ".length)}}))}}])}},In=function(){function e(t,n){Object(s.a)(this,e);var r=R("center",t).as(Z),a=R("size",t).as(Z),i=R("ratio",t).as(Z),o=R("mode",t).as(G).value;this.pixelSize=n;var u=Math.abs(a.x),l=Math.abs(a.y),c=u*i.x/(l*i.y),f=n.x/n.y;if("fit"===o)f>c?u=f*l:l=u/f;else if("fill"===o)f>c?l=u/f:u=f*l;else if("stretch"!==o)throw new Error("Invalid mode: '".concat(o,'\', should be "fit", "fill" or "stretch"'));var v=.5*u,m=.5*l;this.bounds=[r.x-v,r.y-m,r.x+v,r.y+m];var p=n.x/u,h=-n.y/l;this.pixelTransformX=[p,-this.bounds[0]*p],this.pixelTransformY=[h,-this.bounds[3]*h]}return Object(f.a)(e,[{key:"toPixels",value:function(e,t){return{x:e*this.pixelTransformX[0]+this.pixelTransformX[1],y:t*this.pixelTransformY[0]+this.pixelTransformY[1]}}}]),e}(),Nn={name:"#styles",evaluate:function(){Bt();return new Nt({view:{display:"flex",flex:1,position:"relative","& canvas":{display:"block",position:"absolute",left:0,right:0,top:0,bottom:0}}})}},Ln={name:"view",evaluate:function(){return U([{name:"viewport",evaluate:function(){return U([{name:"center",evaluate:function(){return new Z(0,0)}},{name:"size",evaluate:function(){return new Z(2,2)}},{name:"ratio",evaluate:function(){return new Z(1,1)}},{name:"mode",evaluate:function(){return new G("fit")}}])}},{name:"item0",evaluate:function(){return new X(0)}},{name:"item1",evaluate:function(){return new X(0)}},{name:"item2",evaluate:function(){return new X(0)}},{name:"item3",evaluate:function(){return new X(0)}},{name:"item4",evaluate:function(){return new X(0)}},{name:"item5",evaluate:function(){return new X(0)}},{name:"item6",evaluate:function(){return new X(0)}},{name:"item7",evaluate:function(){return new X(0)}},{name:"#pixel_size",evaluate:function(){return new Z(0,0)}},{name:"ratio",evaluate:function(){var e=R("#pixel_size").as(Z);return 0===e.x||0===e.y?new X(0):new X(e.x/e.y)}},{name:"#ui:node",evaluate:function(){var e,t,n=(e=P().as(B).root(),t=R("plot",e).as(B),R("#styles",t).as(Nt).sheet.classes),r=document.createElement("div");r.className="container "+n.view;var a=document.createElement("canvas");r.appendChild(a);var i=P().as(B),o=new bt(i,"#pixel_size"),u=new ResizeObserver((function(e){var t=e[e.length-1].contentRect,n=t.width,r=t.height;o.bind((function(){return new Z(n,r)}))})),l=new It(r,{},[u]);return function(){var e=R("#pixel_size").as(Z);if(0===e.x||0===e.y)return l;a.width=e.x,a.height=e.y;var t=R("viewport").as(B),n=new In(t,e);return function(){var t=a.getContext("2d");t.font="italic bold 1.0em math",t.clearRect(0,0,e.x,e.y);for(var r=0;r<8;r++){var i=R("item"+r);if(i.is(B))R("#plot:item",i).as(hn).render({canvas:a,context:t,viewport:n})}return l}}}}])}},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(jt.a)(e),{name:"plot",bindings:[gn,bn,xn,Sn,Cn,An,Rn,Pn,Ln,Nn]}};function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dn={position:"absolute",top:0,left:0,width:"100%",height:"100%"},Vn=function(e){var t=e.code,n=e.hasInnerShadow,i=void 0!==n&&n,o=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(o.current){var e=[nn(),mn(),Bn(),Qt({container:o.current})],n=function(e){var t=e.code,n=void 0===t?"":t,r=e.plugins;return new Tt(n,void 0===r?[]:r)}({code:t,plugins:e});n.next();var r=null;return r=requestAnimationFrame((function e(t){n.update(t),r=requestAnimationFrame(e)})),function(){cancelAnimationFrame(r)}}}),[o.current,t]),a.a.createElement("div",{style:{flex:1,position:"relative"}},a.a.createElement("div",{style:Fn({},Dn),ref:o}),i&&a.a.createElement("div",{style:Fn(Fn({},Dn),{},{boxShadow:"inset 0 0 4px #444",pointerEvents:"none"})}))};n(134),t.default=function(){var e=Object(i.useRouteData)(),t=e.samples,n=e.currentSample,r=e.background;return a.a.createElement("div",{className:"sample-page"+(n?"":" display-menu")},a.a.createElement("div",{className:"sample-list"},a.a.createElement("h2",null,n?a.a.createElement(a.a.Fragment,null,a.a.createElement(o.Link,{to:"/samples"},"Samples")," > ".concat(n.title)):"All Samples"),a.a.createElement("hr",null),a.a.createElement("ul",null,t.map((function(e){return a.a.createElement("li",{key:e.name},a.a.createElement(o.Link,{to:"/samples/".concat(e.name),className:n&&e.name===n.name?"selected":""},a.a.createElement("h3",null,e.title),a.a.createElement("p",null,e.description)))})))),n?a.a.createElement(Vn,{code:n.code,hasInnerShadow:!0}):a.a.createElement("div",{className:"explore"},a.a.createElement("div",{className:"background"},a.a.createElement(Vn,{code:r.code})),a.a.createElement("div",null,a.a.createElement("h1",null,"Explore Samples"),a.a.createElement("p",null,"Use the left panel to browse samples.")),a.a.createElement("div",{className:"spacer"}),a.a.createElement("div",null,a.a.createElement("h2",null,"Highlights"),a.a.createElement("ul",{className:"highlights"},a.a.createElement("li",null,a.a.createElement(o.Link,{to:"/samples/shaders"},a.a.createElement("img",{src:"/images/shaders.jpg"}),a.a.createElement("h2",null,"Shaders"))),a.a.createElement("li",null,a.a.createElement(o.Link,{to:"/samples/plots"},a.a.createElement("img",{src:"/images/plots.jpg"}),a.a.createElement("h2",null,"Plots"))),a.a.createElement("li",null,a.a.createElement(o.Link,{to:"/samples/shader-editor"},a.a.createElement("img",{src:"/images/shader-editor.jpg"}),a.a.createElement("h2",null,"Shader Editor")))))))}}}]);